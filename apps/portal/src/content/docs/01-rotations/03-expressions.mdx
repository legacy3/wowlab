---
title: Expressions
description: All available rotation expressions
nextSteps:
  - 01-rotations/04-advanced-patterns
  - 02-concepts/00-how-sims-work
---

# Expressions

Expressions query game state for rotation conditions. Use them in the `if` field of actions.

## Resources

Query resource pools (focus, energy, mana, rage, runic_power):

| Expression          | Type | Description                    |
| ------------------- | ---- | ------------------------------ |
| `focus.current`     | f64  | Current amount                 |
| `focus.max`         | f64  | Maximum capacity               |
| `focus.deficit`     | f64  | Amount missing (max - current) |
| `focus.percent`     | f64  | Percentage (0-100)             |
| `focus.regen`       | f64  | Regeneration per second        |
| `focus.time_to_max` | f64  | Seconds until capped           |

Replace `focus` with any resource type.

## Cooldowns

Query spell cooldowns:

| Expression                    | Type | Description                |
| ----------------------------- | ---- | -------------------------- |
| `cd.spell.ready`              | bool | Off cooldown               |
| `cd.spell.remains`            | f64  | Seconds until ready        |
| `cd.spell.charges`            | i32  | Current charges            |
| `cd.spell.charges_fractional` | f64  | Including partial recharge |

Replace `spell` with the spell name (lowercase, underscores).

## Buffs

Query player buffs:

| Expression              | Type | Description           |
| ----------------------- | ---- | --------------------- |
| `buff.name.active`      | bool | Buff is up            |
| `buff.name.stacks`      | i32  | Stack count           |
| `buff.name.remains`     | f64  | Seconds until expires |
| `buff.name.refreshable` | bool | In pandemic window    |

## Debuffs

Query target debuffs:

| Expression                | Type | Description           |
| ------------------------- | ---- | --------------------- |
| `debuff.name.active`      | bool | Debuff is up          |
| `debuff.name.stacks`      | i32  | Stack count           |
| `debuff.name.remains`     | f64  | Seconds until expires |
| `debuff.name.refreshable` | bool | In pandemic window    |

## Combat

Query fight state:

| Expression       | Type | Description              |
| ---------------- | ---- | ------------------------ |
| `combat.time`    | f64  | Seconds since pull       |
| `combat.remains` | f64  | Seconds until fight ends |

## Target

Query enemy state:

| Expression              | Type | Description                   |
| ----------------------- | ---- | ----------------------------- |
| `target.health`         | f64  | Current health                |
| `target.health_percent` | f64  | Health percentage (0-100)     |
| `target.time_to_die`    | f64  | Estimated seconds until death |
| `target.distance`       | f64  | Distance in yards             |
| `enemy.count`           | i32  | Number of enemies             |

## Player

Query player state:

| Expression      | Type | Description      |
| --------------- | ---- | ---------------- |
| `player.haste`  | f64  | Haste percentage |
| `player.crit`   | f64  | Crit percentage  |
| `player.moving` | bool | Currently moving |

## Variables

Reference user-defined variables:

```
variable.name
```

## Literals

| Type    | Examples             |
| ------- | -------------------- |
| Boolean | `true`, `false`      |
| Integer | `1`, `50`, `100`     |
| Float   | `1.5`, `0.3`, `30.0` |

## Operators

### Logical

| Operator | Syntax | Example                          |
| -------- | ------ | -------------------------------- |
| And      | `&`    | `buff.x.active & cd.y.ready`     |
| Or       | `\|`   | `buff.x.active \| buff.y.active` |
| Not      | `!`    | `!buff.x.active`                 |

### Comparison

| Operator      | Syntax | Example                      |
| ------------- | ------ | ---------------------------- |
| Greater       | `>`    | `focus.current > 50`         |
| Greater/Equal | `>=`   | `buff.x.stacks >= 3`         |
| Less          | `<`    | `target.health_percent < 20` |
| Less/Equal    | `<=`   | `cd.x.remains <= 2`          |
| Equal         | `=`    | `buff.x.stacks = 5`          |
| Not Equal     | `!=`   | `enemy.count != 1`           |

### Arithmetic

| Operator | Syntax | Example                     |
| -------- | ------ | --------------------------- |
| Add      | `+`    | `focus.current + 30`        |
| Subtract | `-`    | `focus.max - focus.current` |
| Multiply | `*`    | `player.haste * 1.1`        |
| Divide   | `/`    | `buff.x.remains / 3`        |

## Examples

**Cast Kill Command if off cooldown and have focus:**

```
cd.kill_command.ready & focus.current >= 30
```

**Cast Bestial Wrath if not active and ready:**

```
!buff.bestial_wrath.active & cd.bestial_wrath.ready
```

**Execute phase:**

```
target.health_percent < 20
```

**Pool focus before cooldowns:**

```
cd.bestial_wrath.remains < 3 & focus.current < 80
```
