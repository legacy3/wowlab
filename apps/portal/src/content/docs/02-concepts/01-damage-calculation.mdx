---
title: Damage Calculation
description: How the engine calculates damage
nextSteps:
  - 02-concepts/02-stats-and-resources
  - 02-concepts/03-auras-and-procs
---

# Damage Calculation

Damage flows through a pipeline of multipliers. Understanding the layers helps you interpret simulation results.

## The pipeline

<Mermaid
  chart={`
flowchart LR
    Base[Base Damage] --> Action[Action Mult]
    Action --> DA[DA Mult]
    DA --> Persistent[Persistent]
    Persistent --> Player[Player Mult]
    Player --> Target[Target Mult]
    Target --> Vers[Versatility]
    Vers --> Pet[Pet Mult]
    Pet --> Crit{Crit?}
    Crit -->|Yes| CritMult[× Crit Mult]
    Crit -->|No| Final[Final Damage]
    CritMult --> Final
`}
/>

## Base damage

Spells define a coefficient and scaling:

```
base_damage = coefficient * attack_power
```

Or for weapon-based abilities:

```
base_damage = coefficient * weapon_dps * normalized_speed
```

## Multiplier layers

| Layer            | Source                 | Examples                            |
| ---------------- | ---------------------- | ----------------------------------- |
| Action           | Spell-specific bonuses | Talent modifiers to specific spells |
| DA (Direct/Area) | Direct damage buffs    | Mastery for some specs              |
| Persistent       | Maintained buffs       | Bestial Wrath damage bonus          |
| Player           | Player-wide bonuses    | Potions, consumables                |
| Target           | Debuffs on target      | Vulnerability effects               |
| Versatility      | Stat bonus             | `1 + vers_damage_pct`               |
| Pet              | Pet damage scaling     | Pet inheritance factor              |

## Calculation

```
total = base
      × action
      × da
      × persistent
      × player
      × target
      × (1 + versatility)
      × pet

if crit:
    total = total × crit_multiplier
```

## Crit multiplier

Default crit multiplier is 2.0 (double damage). Some effects modify this:

- Talents that increase crit damage
- Debuffs that increase crit damage taken

## Armor mitigation

Physical damage is reduced by armor:

```
mitigation = armor / (armor + armor_constant)
damage = base_damage × (1 - mitigation)
```

The armor constant depends on target level. For level 80 targets, it's 7390.

Magic damage (fire, frost, shadow, etc.) ignores armor.

## DoT snapshotting

DoTs can snapshot stats at application time:

- Attack power
- Crit chance
- Haste
- Damage multipliers

The snapshotted values persist for the DoT's duration. Refreshing the DoT updates the snapshot.

Not all DoTs snapshot. Check the spell's `snapshots` flag.

## Pet damage

Pet damage inherits from the player:

- Attack power scaled by inheritance factor (varies by pet)
- Crit and haste ratings copied directly
- Pet-specific multipliers apply

## Damage types

| Type     | Mitigated by                  |
| -------- | ----------------------------- |
| Physical | Armor                         |
| Fire     | Magic resist (minimal in PvE) |
| Frost    | Magic resist                  |
| Nature   | Magic resist                  |
| Shadow   | Magic resist                  |
| Arcane   | Magic resist                  |
| Holy     | Magic resist                  |

## Damage breakdown

Simulations track damage by source:

- Per-spell totals
- Percentage of total damage
- Average per cast

Use this to identify:

- Highest value abilities
- Abilities that underperform
- Rotation inefficiencies
